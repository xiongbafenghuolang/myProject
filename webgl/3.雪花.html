<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>使用 three.js制作雪花效果</title>
</head>
<body>

    <!-- 引入three.js -->
    <script src="libs/Three.js"></script>
    <script>
        var width = window.innerWidth,
            height = window.innerHeight;

        // 1. 搭建舞台
        var scene = new THREE.Scene();

        // 2. 摄像机
        var camera = new THREE.PerspectiveCamera(45,width / height,0.1,800);//设置相机，舞台比例

        camera.position.x = 0;
        camera.position.y = 0;
        camera.position.z = 50;

        camera.lookAt(scene.position);

        // 3.渲染器
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(width,height);
        document.body.appendChild(renderer.domElement);

        // 4.演员登台
        
        // 创建几何体
        var geometry = new THREE.Geometry();

        // 加载文理(不能使用文件地址)
       var texture =  new THREE.TextureLoader().load("images/1.jpg");//实例化了一个文理加载器


        // "装饰"
        var material = new THREE.PointsMaterial({
            size:20,
            map:texture
        })

        var range = 500;

        // 创建更多的几何体（来承载许多雪花）
        for(var i = 0; i < 400; i++) {
            var particle = new THREE.Vector3(
                Math.random() * range - range / 2,
                Math.random() * range  * 1.5,
                Math.random() * range - range / 2
            );

            particle.VelocityY = 0.1 + Math.random() / 5;
            particle.VelocityX = ( Math.random() - 0.5 )/ 3;
            particle.VelocityZ = ( Math.random() - 0.5 )/ 3;

            geometry.vertices.push(particle);
        }

        var points = new THREE.Points(geometry,material);

        scene.add(points);

        render();

        // renderer.render(scene,camera);

        function render(){
            renderer.render(scene,camera);
            
            // 设置雪花动的轨迹
            scene.children.forEach(function() {
                // 。。。。。。。。
                // 。。。。。。。。
                // 。。。。。。。。

            });

            requestAnimationFrame(render)
        }
    </script>
</body>
</html>